<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ - MK Vocab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="container">
        <div id="app-content"></div>
    </div>

    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="../index.html" class="nav-item">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                <span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
            </a>
            <a href="vocab-list.html" class="nav-item">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" />
                </svg>
                <span>‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</span>
            </a>
            <a href="games.html" class="nav-item">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M21.58 16.09l-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91z" />
                </svg>
                <span>‡πÄ‡∏Å‡∏°</span>
            </a>
            <a href="stats.html" class="nav-item active">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
                </svg>
                <span>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</span>
            </a>
            <a href="settings.html" class="nav-item">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58z" />
                </svg>
                <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
            </a>
        </div>
    </nav>

    <script src="../js/storage.js"></script>
    <script>
        const Stats = {
            grades: {
                m1: { name: '‡∏°.1', total: 499, gradient: 'linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)' },
                m2: { name: '‡∏°.2', total: 500, gradient: 'linear-gradient(135deg, #F093FB 0%, #F5576C 100%)' },
                m3: { name: '‡∏°.3', total: 500, gradient: 'linear-gradient(135deg, #4FACFE 0%, #00F2FE 100%)' },
                m4: { name: '‡∏°.4', total: 500, gradient: 'linear-gradient(135deg, #43E97B 0%, #38F9D7 100%)' },
                m5: { name: '‡∏°.5', total: 500, gradient: 'linear-gradient(135deg, #FA709A 0%, #FEE140 100%)' },
                m6: { name: '‡∏°.6', total: 500, gradient: 'linear-gradient(135deg, #667EEA 0%, #764BA2 100%)' }
            },

            achievements: {
                streak_3: { icon: 'üî•', name: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 3 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô 3 ‡∏ß‡∏±‡∏ô' },
                streak_7: { icon: '‚≠ê', name: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 7 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô 7 ‡∏ß‡∏±‡∏ô' },
                streak_14: { icon: 'üèÜ', name: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 14 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô 14 ‡∏ß‡∏±‡∏ô' },
                streak_30: { icon: 'üëë', name: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 30 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô 30 ‡∏ß‡∏±‡∏ô' },
                first_game: { icon: 'üéÆ', name: '‡πÄ‡∏Å‡∏°‡πÄ‡∏°‡∏≠‡∏£‡πå', desc: '‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å' },
                vocab_100: { icon: 'üìö', name: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö 100 ‡∏Ñ‡∏≥' },
                vocab_500: { icon: 'üéì', name: '‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö 500 ‡∏Ñ‡∏≥' },
                vocab_1000: { icon: 'üß†', name: '‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞', desc: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö 1,000 ‡∏Ñ‡∏≥' }
            },

            init() {
                this.render();
                this.setupDarkMode();
            },

            render() {
                const stats = Storage.getStats();
                const totalLearned = Storage.getTotalLearned();

                // Check for vocab achievements
                if (totalLearned >= 100) Storage.addAchievement('vocab_100');
                if (totalLearned >= 500) Storage.addAchievement('vocab_500');
                if (totalLearned >= 1000) Storage.addAchievement('vocab_1000');

                const updatedStats = Storage.getStats();
                const userAchievements = updatedStats.achievements || [];

                document.getElementById('app-content').innerHTML = `
                    <div class="header fade-in">
                        <h1 class="header-title">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
                    </div>

                    <!-- Main Stats -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 24px;" class="fade-in" style="animation-delay: 0.1s">
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 36px; margin-bottom: 8px;">üî•</div>
                            <div style="font-size: 32px; font-weight: 700; color: #FF6B6B;">${stats.streak || 0}</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">‡∏ß‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 36px; margin-bottom: 8px;">üìö</div>
                            <div style="font-size: 32px; font-weight: 700; color: var(--apple-blue);">${totalLearned}</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß</div>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 36px; margin-bottom: 8px;">‚≠ê</div>
                            <div style="font-size: 32px; font-weight: 700; color: #FF9500;">${stats.totalScore || 0}</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 36px; margin-bottom: 8px;">üéÆ</div>
                            <div style="font-size: 32px; font-weight: 700; color: #34C759;">${stats.gamesPlayed || 0}</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</div>
                        </div>
                    </div>

                    <!-- Progress by Grade -->
                    <div class="section fade-in" style="animation-delay: 0.2s">
                        <h2 class="section-title">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö</h2>
                        ${Object.entries(this.grades).map(([grade, info]) => {
                    const learned = Storage.getLearned(grade).length;
                    const progress = Math.round((learned / info.total) * 100);
                    return `
                                <div class="card" style="margin-bottom: 12px; padding: 16px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="font-weight: 600;">${info.name}</span>
                                        <span style="font-size: 14px; color: var(--text-secondary);">${learned}/${info.total} ‡∏Ñ‡∏≥</span>
                                    </div>
                                    <div style="height: 8px; background: rgba(0,0,0,0.1); border-radius: 4px; overflow: hidden;">
                                        <div style="height: 100%; width: ${progress}%; background: ${info.gradient}; border-radius: 4px; transition: width 0.5s ease;"></div>
                                    </div>
                                    <div style="text-align: right; font-size: 12px; color: var(--text-secondary); margin-top: 4px;">${progress}%</div>
                                </div>
                            `;
                }).join('')}
                    </div>

                    <!-- Achievements -->
                    <div class="section fade-in" style="animation-delay: 0.3s">
                        <h2 class="section-title">
                            ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                            <span style="font-size: 14px; color: var(--text-secondary);">${userAchievements.length}/${Object.keys(this.achievements).length}</span>
                        </h2>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                            ${Object.entries(this.achievements).map(([id, ach]) => {
                    const unlocked = userAchievements.includes(id);
                    return `
                                    <div class="card" style="text-align: center; padding: 16px 8px; ${!unlocked ? 'opacity: 0.4; filter: grayscale(1);' : ''}">
                                        <div style="font-size: 32px; margin-bottom: 8px;">${ach.icon}</div>
                                        <div style="font-size: 11px; font-weight: 500;">${ach.name}</div>
                                    </div>
                                `;
                }).join('')}
                        </div>
                    </div>
                `;
            },

            setupDarkMode() {
                const settings = Storage.getSettings();
                if (settings.darkMode) {
                    document.body.classList.add('dark');
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => Stats.init());
    </script>
</body>

</html>